<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Rasterized figures | SCpubr</title>
<meta name="author" content="Enrique Blanco Carmona">
<meta name="description" content="Many times we want to generate figures in PDF format so that we can later on modify some other aspects in image editors. The problem comes when we work with datasets of, let’s say, 50.000 cells...">
<meta name="generator" content="bookdown 0.24 with bs4_book()">
<meta property="og:title" content="Rasterized figures | SCpubr">
<meta property="og:type" content="book">
<meta property="og:url" content="https://enblacar.github.io/SCpubr-book/rasterized-figures.html">
<meta property="og:image" content="https://enblacar.github.io/SCpubr-book/images/SCpubr_logo.png">
<meta property="og:description" content="Many times we want to generate figures in PDF format so that we can later on modify some other aspects in image editors. The problem comes when we work with datasets of, let’s say, 50.000 cells...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Rasterized figures | SCpubr">
<meta name="twitter:description" content="Many times we want to generate figures in PDF format so that we can later on modify some other aspects in image editors. The problem comes when we work with datasets of, let’s say, 50.000 cells...">
<meta name="twitter:image" content="https://enblacar.github.io/SCpubr-book/images/SCpubr_logo.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/header-attrs-2.11/header-attrs.js"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.3.1/transition.js"></script><script src="libs/bs3compat-0.3.1/tabs.js"></script><script src="libs/bs3compat-0.3.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="libs/kePrint-0.0.1/kePrint.js"></script><link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link rel="shortcut icon" href="images/SCpubr_logo_favicon.png">
<script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a id="toc_title" href="index.html" title="">SCpubr</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <div class="book-extra"></div>
      <nav id="left-panel" aria-label="Table of contents"><ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About this package</a></li>
<li><a class="" href="installation-guide.html">Installation guide</a></li>
<li><a class="" href="dataset-used.html">Dataset used</a></li>
<li><a class="" href="dim-plots.html"><span class="header-section-number">1</span> Dim plots</a></li>
<li><a class="" href="feature-plots.html"><span class="header-section-number">2</span> Feature plots</a></li>
<li><a class="" href="nebulosa-plots.html"><span class="header-section-number">3</span> Nebulosa plots</a></li>
<li><a class="" href="bee-swarm-plots.html"><span class="header-section-number">4</span> Bee Swarm plots</a></li>
<li><a class="" href="violin-plots.html"><span class="header-section-number">5</span> Violin plots</a></li>
<li><a class="" href="dot-plots.html"><span class="header-section-number">6</span> Dot plots</a></li>
<li><a class="" href="bar-plots.html"><span class="header-section-number">7</span> Bar plots</a></li>
<li><a class="" href="term-enrichment-plots.html"><span class="header-section-number">8</span> Term Enrichment Plots</a></li>
<li><a class="" href="enrichment-score-heatmaps.html"><span class="header-section-number">9</span> Enrichment score heatmaps</a></li>
<li><a class="" href="correlation-matrix-heatmaps.html"><span class="header-section-number">10</span> Correlation matrix heatmaps</a></li>
<li><a class="" href="cellular-state-plots.html"><span class="header-section-number">11</span> Cellular State Plots</a></li>
<li><a class="" href="common-features-across-plots.html">Common features across plots</a></li>
<li><a class="active" href="rasterized-figures.html">Rasterized figures</a></li>
<li><a class="" href="save-the-figures.html">Save the figures</a></li>
<li><a class="" href="troubleshooting.html">Troubleshooting</a></li>
<li><a class="" href="citation.html">Citation</a></li>
</ul>

        <div class="book-extra">
          <!-- Duplicated this entry to point to the package repo. -->
          <p class="mb-2"><a id="package-repo" href="https://github.com/enblacar/SCpubr">View package source <i class="fab fa-github"></i></a></p>
          <p><a id="book-repo" href="https://github.com/enblacar/SCpubr-book">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="rasterized-figures" class="section level1 unnumbered">
<h1>Rasterized figures<a class="anchor" aria-label="anchor" href="#rasterized-figures"><i class="fas fa-link"></i></a>
</h1>
<p>Many times we want to generate figures in PDF format so that we can later on modify some other aspects in image editors. The problem comes when we work with datasets of, let’s say, 50.000 cells and then we save the plot as PDF, where each cell now becomes an item that needs to be tracked in the PDF file. For this, both <code><a href="https://rdrr.io/pkg/SCpubr/man/do_DimPlot.html">SCpubr::do_DimPlot()</a></code> and <code><a href="https://rdrr.io/pkg/SCpubr/man/do_FeaturePlot.html">SCpubr::do_FeaturePlot()</a></code> present the parameter <code>raster</code>, than if set to <code>TRUE</code> turns the image into a rasterized image.</p>
<p>With this, there are two major concepts to take into account when generating rasterized images: <code>pt.size</code> and <code>raster.dpi</code>.</p>
<div id="effect-of-point-size-in-the-plots." class="section level2 unnumbered">
<h2>Effect of point size in the plots.<a class="anchor" aria-label="anchor" href="#effect-of-point-size-in-the-plots."><i class="fas fa-link"></i></a>
</h2>
<p>Depending on the point size provided, if this value is lower than 1, by default the cells become plus signs.</p>
<div class="sourceCode" id="cb168"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p.0.5</span> <span class="op">&lt;-</span> <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_DimPlot.html">do_DimPlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>, 
                            raster <span class="op">=</span> <span class="cn">TRUE</span>,
                            pt.size <span class="op">=</span> <span class="fl">0.5</span>,
                            plot.title <span class="op">=</span> <span class="st">"pt.size = 0.5"</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">512</span><span class="op">)</span> <span class="op">|</span>
         <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_FeaturePlot.html">do_FeaturePlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>,
                                raster <span class="op">=</span> <span class="cn">TRUE</span>,
                                features <span class="op">=</span> <span class="st">"CD14"</span>,
                                pt.size <span class="op">=</span> <span class="fl">0.5</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">512</span><span class="op">)</span>

<span class="va">p.1.0</span> <span class="op">&lt;-</span> <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_DimPlot.html">do_DimPlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>, 
                            raster <span class="op">=</span> <span class="cn">TRUE</span>,
                            pt.size <span class="op">=</span> <span class="fl">1</span>,
                            plot.title <span class="op">=</span> <span class="st">"pt.size = 1.0"</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">512</span><span class="op">)</span> <span class="op">|</span>
         <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_FeaturePlot.html">do_FeaturePlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>,
                                raster <span class="op">=</span> <span class="cn">TRUE</span>,
                                features <span class="op">=</span> <span class="st">"CD14"</span>,
                                pt.size <span class="op">=</span> <span class="fl">1</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">512</span><span class="op">)</span>

<span class="va">p.2.0</span> <span class="op">&lt;-</span> <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_DimPlot.html">do_DimPlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>, 
                            raster <span class="op">=</span> <span class="cn">TRUE</span>,
                            pt.size <span class="op">=</span> <span class="fl">2</span>,
                            plot.title <span class="op">=</span> <span class="st">"pt.size = 2.0"</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">512</span><span class="op">)</span> <span class="op">|</span>
         <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_FeaturePlot.html">do_FeaturePlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>,
                                raster <span class="op">=</span> <span class="cn">TRUE</span>,
                                features <span class="op">=</span> <span class="st">"CD14"</span>,
                                pt.size <span class="op">=</span> <span class="fl">2</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">512</span><span class="op">)</span>
<span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p.0.5</span> <span class="op">/</span> <span class="va">p.1.0</span> <span class="op">/</span> <span class="va">p.2.0</span>
<span class="va">p</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-2"></span>
<img src="96-RasterizeFigures_files/figure-html/unnamed-chunk-2-1.png" alt="Effect of point size in rasterized images." width="100%" height="100%"><p class="caption">
Figure 1.1: Effect of point size in rasterized images.
</p>
</div>
</div>
<div id="effect-of-raster-dpi-in-the-plots." class="section level2 unnumbered">
<h2>Effect of raster dpi in the plots.<a class="anchor" aria-label="anchor" href="#effect-of-raster-dpi-in-the-plots."><i class="fas fa-link"></i></a>
</h2>
<p>Depending on the value provided to <code>raster.dpi</code>, the overall resolution of the plot will vary. Let’s focus on setting <code>pt.size = 2</code> and vary <code>raster.dpi</code>:</p>
<div class="sourceCode" id="cb169"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">p.0.5</span> <span class="op">&lt;-</span> <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_DimPlot.html">do_DimPlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>, 
                            raster <span class="op">=</span> <span class="cn">TRUE</span>,
                            pt.size <span class="op">=</span> <span class="fl">2</span>,
                            plot.title <span class="op">=</span> <span class="st">"raster.dpi = 512"</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">512</span><span class="op">)</span> <span class="op">|</span>
         <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_FeaturePlot.html">do_FeaturePlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>,
                                raster <span class="op">=</span> <span class="cn">TRUE</span>,
                                features <span class="op">=</span> <span class="st">"CD14"</span>,
                                pt.size <span class="op">=</span> <span class="fl">2</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">512</span><span class="op">)</span>

<span class="va">p.1.0</span> <span class="op">&lt;-</span> <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_DimPlot.html">do_DimPlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>, 
                            raster <span class="op">=</span> <span class="cn">TRUE</span>,
                            pt.size <span class="op">=</span> <span class="fl">2</span>,
                            plot.title <span class="op">=</span> <span class="st">"raster.dpi = 1024"</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">1024</span><span class="op">)</span> <span class="op">|</span>
         <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_FeaturePlot.html">do_FeaturePlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>,
                                raster <span class="op">=</span> <span class="cn">TRUE</span>,
                                features <span class="op">=</span> <span class="st">"CD14"</span>,
                                pt.size <span class="op">=</span> <span class="fl">2</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">1024</span><span class="op">)</span>

<span class="va">p.2.0</span> <span class="op">&lt;-</span> <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_DimPlot.html">do_DimPlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>, 
                            raster <span class="op">=</span> <span class="cn">TRUE</span>,
                            pt.size <span class="op">=</span> <span class="fl">2</span>,
                            plot.title <span class="op">=</span> <span class="st">"raster.dpi = 2048"</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">2048</span><span class="op">)</span> <span class="op">|</span>
         <span class="fu">SCpubr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SCpubr/man/do_FeaturePlot.html">do_FeaturePlot</a></span><span class="op">(</span>sample <span class="op">=</span> <span class="va">sample</span>,
                                raster <span class="op">=</span> <span class="cn">TRUE</span>,
                                features <span class="op">=</span> <span class="st">"CD14"</span>,
                                pt.size <span class="op">=</span> <span class="fl">2</span>,
                            raster.dpi <span class="op">=</span> <span class="fl">2048</span><span class="op">)</span>
<span class="va">p</span> <span class="op">&lt;-</span> <span class="va">p.0.5</span> <span class="op">/</span> <span class="va">p.1.0</span> <span class="op">/</span> <span class="va">p.2.0</span>
<span class="va">p</span></code></pre></div>
<div class="figure" style="text-align: center">
<span style="display:block;" id="fig:unnamed-chunk-3"></span>
<img src="96-RasterizeFigures_files/figure-html/unnamed-chunk-3-1.png" alt="Effect of raster dpi in rasterized images." width="100%" height="100%"><p class="caption">
Figure 1.2: Effect of raster dpi in rasterized images.
</p>
</div>
<p>Therefore, the optimal combination will depend on your dataset size and how you want it to look like.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="common-features-across-plots.html">Common features across plots</a></div>
<div class="next"><a href="save-the-figures.html">Save the figures</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><form role="search" class="mt-4 mb-4">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>
      <div class="book-extra">
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#rasterized-figures">Rasterized figures</a></li>
<li><a class="nav-link" href="#effect-of-point-size-in-the-plots.">Effect of point size in the plots.</a></li>
<li><a class="nav-link" href="#effect-of-raster-dpi-in-the-plots.">Effect of raster dpi in the plots.</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<!-- Modified page for chapter. --><li><a id="book-source" href="https://github.com/enblacar/SCpubr-book/blob/main/96-RasterizeFigures.Rmd">View chapter source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/enblacar/SCpubr-book/edit/main/96-RasterizeFigures.Rmd">Edit this chapter <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    
  </div>

</nav>
</div>
</div> <!-- .container -->




</div>
</body>
<!-- Moved the footer outside of the body to make it span all page width. --><footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p class="text-center">Written by <strong>Enrique Blanco Carmona</strong> on 08 July, 2022.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p class="text-center">This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</html>
